<html>
<head>
    <meta http-equiv="content-type" content="text/html;charset=utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/> 
    <title>weitao</title>
    <script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
</head>

<body>
    <div id="keep" style="height: 50px;">
        <input style="float: left;width: 200px;"  type="text" name="url" id="url" value="https://m.tb.cn/h.enFcVqq?sm=ffc7fe" /><span id="que" style="float: right;">确认</span><span id="ctimeout" style="float: right;">暂停</span>
    </div>
    <iframe style="height: 500px; width: 400px; overflow: scroll;border:none;" id="iframe" src="https://m.tb.cn/h.enFcVqq?sm=ffc7fe"></iframe>
    
    <script type="text/javascript">
        $(document).ready(function(){
            var url = 'https://m.tb.cn/h.enFcVqq?sm=ffc7fe';
            var n = 0;
            var index;
            timeout();
            
            $('#que').on('click', function(){
                var u = $('#url').val();
                if(u){
                    url = u;
                    n = 0;
                    tt();
                }
            });
            
            $('#ctimeout').on('click', function(){
                ctimeout();
            });
            
            
            function random(lower, upper) {
                return (Math.floor(Math.random() * (upper - lower+1)) + lower)*1000;
            }
            
            function url() {
                return $('#url').val;
            }
            
            function tt(){
                console.log(++n);
                $('#iframe').attr('src', url);
                timeout();
            }
            
            function timeout(){
                ctimeout();
                index = setTimeout(tt, random(10,30));
            }
            
            function ctimeout(){
                clearTimeout(index);
            }
        });
        
	</script>
</body>    
</html>